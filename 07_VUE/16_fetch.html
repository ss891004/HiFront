<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>fetch</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<script src="vue.js"></script>
<script src="axios.js"></script>
</head>
<body>
    <div id="box">
    	<button @click="handleClick()">正在热映</button>

        <ul>
            <li v-for="data in datalist">
                <img :src="data.poster"/>
                <h3>{{data.name}}</h3>
                <p>{{data.synopsis}}</p>

                <ul>
                    <li v-for="item in data.actors">
                        <img :src="item.avatarAddress"/>
                        <h4>{{item.name}}</h4>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <script type="text/javascript">
    	
       new Vue({
        el:"#box",
        data:{
            datalist:[]
        },
        methods:{
            handleClick(){

                // 需要在vscode  安装 live server 插件
                // 不然报错： Fetch API cannot load file:///Users/shuaishi/HiFront/VUE/json/test.json. URL scheme must be "http" or "https" for CORS request.

                fetch("./json/test.json").then(result=>result.json()).then(res=>{
                    console.log(res);
                    this.datalist =res.data.films
                })


                //post-1
            //    fetch("./json/test.json",{
            //     method:"post",
            //     headers:{
            //         "Content‐Type": "application/x‐www‐form‐urlencoded" 
            //     },
            //     credentials:  'include',
            //     body:"name=kerwin&age=100"
            //    }).then(res=>res.json()).then(res=>{
            //     console.log(res);
            //    })

               //post -2 
                // fetch("json/test.json",{
                //  method:"post",
                //  headers:{
                //      "Content‐Type": "application/json" 
                //  },
                //  body:JSON.stringify({
                //     name:"kerwin",
                //     age:100
                //  })
                // }).then(res=>res.json()).then(res=>{
                //  console.log(res);
                // })
            }
        }
       })

    </script>
</body>
</html>